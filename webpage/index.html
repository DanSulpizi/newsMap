<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>NewsMap</title>
        <script src="js/jquery.js"></script>    

        <link href='http://fonts.googleapis.com/css?family=Droid+Serif|Oswald:300' rel='stylesheet' type='text/css'>
        
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
        <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
        
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <link rel="stylesheet" href="style.css" type="text/css" />
    </head>
    <body>
        <div id="header"><h1>News Map</h1></div>
        <div id="body">
            <div id="content">
                <div id='map' class="map"></div>

                <div id="cards">
            
                </div>
                <br style="clear: both">
            </div>
        </div>
        
    </body>
    <script>
        $(document).ready(function () {
            var mapboxTiles = L.tileLayer('https://{s}.tiles.mapbox.com/v3/dansulpizi.j17d6k3p/{z}/{x}/{y}.png', {
                attribution: '<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'
            });

            function prepender(e){
                for(var each in markerList){
                    $("#"+markerList[each].options.win_url+"-card").children().removeClass("story_bright");
                }
                $("#"+this.options.win_url+"-card").prependTo("#cards");
                $("#"+this.options.win_url+"-card").children().addClass("story_bright");
                $("#cards").animate({scrollTop: 0}, 'slow');
            }
            
            var map = L.map('map')
                .addLayer(mapboxTiles)
                .setView([30,0], 2);
            
            var locationInfo;            
            
            locationInfo = {"svz79pryfm": [{"locationName": " IQ", "date": "Last Updated: Jun 25, 2014 6:40 PM ET", "secondaryLocations": "[u'syr9f0v2tj', u'svztdjnekv', u'syrmcknq18', u'syr6fy7s5n', u'syqwtnw4xn']", "lat": 32.99999803304672, "url": "http://www.cbc.ca/news/world/iraq-s-kurds-weigh-choices-amid-country-s-unrest-1.2685483", "subline": "Potential dismemberment of Iraq gives Kurds hope of becoming independent, but dangers loom", "headline": "Iraq's Kurds weigh choices amid country's unrest", "long": 44.00000274181366, "source": "cbc"}, {"locationName": " IQ", "date": "Last Updated: Jun 23, 2014 10:32 PM ET", "secondaryLocations": "[u'svztdjnekv']", "lat": 32.99999803304672, "url": "http://www.cbc.ca/news/world/why-iraq-s-problems-are-much-bigger-than-nouri-al-maliki-1.2684395", "subline": "Opportunities to heal the country's sectarian divides in recent years have been lost", "headline": "Why Iraq\u2019s problems are much bigger than Nouri al-Maliki", "long": 44.00000274181366, "source": "cbc"}], "wdqcbntdqp": [{"locationName": " PH", "date": "Last Updated: Jul 15, 2014 6:24 PM ET", "secondaryLocations": "[u'wdw5148e9s', u'wdwh4p0gws', u'wdng68fun2', u'wdw0xvuys9', u'wf088vbck3', u'wdrxs264rj', u'wcb2d0r9tv', u'wdw54j3360', u'wdwn0uef61']", "lat": 12.999999225139618, "url": "http://www.cbc.ca/news/world/typhoon-rammasun-batters-east-philippines-1.2707984", "subline": "Parts of the Philippines are still recovering from last year's 'super typhoon' Haiyan", "headline": "Typhoon Rammasun batters east Philippines", "long": 122.0000034570694, "source": "cbc"}], "sr95sj8fj9": [{"locationName": " IT", "date": "Last Updated: Jul 18, 2014 10:51 PM ET", "secondaryLocations": "[]", "lat": 42.8332981467247, "url": "http://www.cbc.ca/news/world/obama-to-sign-executive-order-barring-federal-discrimination-against-gays-1.2711957", "subline": "Obama's action will update two previous orders about discrimination already on the books", "headline": "Obama to sign executive order barring federal discrimination against gays", "long": 12.833302617073059, "source": "cbc"}], "gcpvjcu5yw": [{"locationName": "London GB", "date": "Last Updated: Jul 21, 2014 3:43 PM ET", "secondaryLocations": "[]", "lat": 51.51419788599014, "url": "http://www.cbc.ca/news/arts/monty-python-performs-last-show-ever-at-london-s-o2-arena-1.2713462", "subline": "Eric Idle, Michael Palin, John Cleese, Terry Jones and Terry Gilliam performed for their last time together", "headline": "Monty Python performs last show ever at London's O2 Arena", "long": -0.09309947490692139, "source": "cbc"}], "sdtm6dtm6d": [{"locationName": " SD", "date": "Last Updated: Apr 21, 2014 6:14 PM ET", "secondaryLocations": "[u'sg6rwfunkf', u's9thwbggy7', u'9wp1d2q02f', u'dnds6ex4ke', u'9vqc2m22qx']", "lat": 14.999999105930328, "url": "http://www.cbc.ca/news/world/south-sudan-ethnic-killings-condemned-by-united-nations-1.2617028", "subline": "", "headline": "South Sudan ethnic killings condemned by United Nations", "long": 29.999998211860657, "source": "cbc"}, {"locationName": " SD", "date": "Last Updated: Jul 21, 2014 8:17 PM ET", "secondaryLocations": "[u'sg6rwfunkf', u'sd1mh7gfyk', u'sdz0smdxmb']", "lat": 14.999999105930328, "url": "http://www.cbc.ca/news/world/south-sudan-on-the-brink-of-famine-as-fighting-rages-on-1.2713893", "subline": "Aid agencies say South Sudan could be headed for the worst famine since the 1984 Ethiopian famine", "headline": "South Sudan on the brink of famine as fighting rages on", "long": 29.999998211860657, "source": "cbc"}], "dnjjegt6c0": [{"locationName": "Central US", "date": "Last Updated: Jul 21, 2014 2:12 AM ET", "secondaryLocations": "[u'dnf8xp75pg', u'9vte83brk9', u'9vk1cvrq75', u'9x0tb33d28', u'9yg00twy01', u'dndh1pvtb4', u'f052kntuzn', u'9rxehf719x', u'drmnr3u6uv', u'9r894t05z3', u'dr5zyrf8ey', u'9qc160170c', u'dr7716c0n8', u'dr9y6r3rcd', u'dre5534dwy', u'9qhpuxh0vf', u'9v3br45855', u'dr0yxg9h9k', u'dp6b0rkx5k']", "lat": 34.736497700214386, "url": "http://www.cbc.ca/news/world/human-smugglers-cash-in-on-central-american-migration-to-u-s-1.2712878", "subline": "'Coyotes' are making record profits as tens of thousands flee drug violence", "headline": "Human smugglers cash in on Central American migration to U.S.", "long": -82.7966970205307, "source": "cbc"}], "sv8e0q3uu3": [{"locationName": "Gaza PS", "date": "Last Updated: Jul 19, 2014 1:45 PM ET", "secondaryLocations": "[u'sv8eny2hv9', u'sv8sxebmjs', u'sv8ewewuck']", "lat": 31.499999463558197, "url": "http://www.cbc.ca/news/world/obama-reaffirms-u-s-support-for-israel-s-gaza-incursion-1.2710788", "subline": "'No nation should accept rockets fired into its borders,' Obama says of Israel's ground push", "headline": "Obama reaffirms U.S. support for Israel's Gaza incursion", "long": 34.466702342033386, "source": "cbc"}, {"locationName": "Gaza PS", "date": "Last Updated: Jul 22, 2014 1:32 AM ET", "secondaryLocations": "[u'sv8sxebmjs']", "lat": 31.499999463558197, "url": "http://www.cbc.ca/news/world/gaza-conflict-israel-strikes-70-new-targets-including-5-mosques-1.2714048", "subline": "U.S. Secretary of State John Kerry pushes for international ceasefire support in Cairo", "headline": "Gaza conflict: Israel strikes 70 new targets, including 5 mosques", "long": 34.466702342033386, "source": "cbc"}, {"locationName": "Gaza PS", "date": "Last Updated: Jul 21, 2014 11:09 PM ET", "secondaryLocations": "[u'sv8eny2hv9', u'sv9n41km88', u'sv8sxebmjs', u'sv8ed96ekp', u'sv83grhetm']", "lat": 31.499999463558197, "url": "http://www.cbc.ca/news/world/gaza-conflict-egypt-may-tweak-truce-deal-as-hamas-israel-stick-to-positions-1.2712869", "subline": "UN's Ban Ki-moon, U.S. Secretary of State John Kerry in Cairo trying to broker Gaza ceasefire", "headline": "Gaza conflict: Egypt may tweak truce deal as Hamas, Israel stick to positions", "long": 34.466702342033386, "source": "cbc"}, {"locationName": "Gaza PS", "date": "Last Updated: Jul 21, 2014 6:54 PM ET", "secondaryLocations": "[u'sv8eny2hv9', u'sv8sxebmjs', u'sv9n41km88', u'sv8ed96ekp']", "lat": 31.499999463558197, "url": "http://www.cbc.ca/news/world/gaza-conflict-truce-elusive-as-hamas-israel-stick-to-positions-1.2712869", "subline": "UN's Ban Ki-moon, U.S. Secretary of State John Kerry in Cairo trying to broker Gaza ceasefire", "headline": "Gaza conflict: Truce elusive as Hamas, Israel stick to positions", "long": 34.466702342033386, "source": "cbc"}, {"locationName": "Gaza PS", "date": "Last Updated: Jul 21, 2014 4:03 PM ET", "secondaryLocations": "[u'sv9n41km88']", "lat": 31.499999463558197, "url": "http://www.cbc.ca/news/world/gaza-conflict-7-israelis-killed-in-clashes-with-palestinian-militants-1.2712869", "subline": "UN's Ban Ki-moon, Secretary of State John Kerry go to Cairo, trying to broker Gaza ceasefire", "headline": "Gaza conflict: 7 Israelis killed in clashes with Palestinian militants", "long": 34.466702342033386, "source": "cbc"}], "9yunmhr3dd": [{"locationName": "Perry US", "date": "Last Updated: Jul 22, 2014 12:02 AM ET", "secondaryLocations": "[u'djysqzw86x', u'9vhrq0q8xu', u'9vk1cvrq75', u'dppc7dt7js', u'9yg00twy01', u'dr18hmx2x0', u'dnge3c3ngq', u'dr4q8t3yyh']", "lat": 39.09099966287613, "url": "http://www.cbc.ca/news/world/rick-perry-to-send-1-000-guardsmen-to-texas-border-during-migrant-influx-1.2713986", "subline": "National Guard troops to help state surveillance and deploy aircraft to monitor border", "headline": "Rick Perry to send 1,000 guardsmen to Texas border during migrant influx", "long": -95.3952044248581, "source": "cbc"}], "6y0zh7w1z0": [{"locationName": " BR", "date": "Last Updated: Jun 18, 2014 10:54 PM ET", "secondaryLocations": "[u'6um0bj1qxy', u'7nx4jyd975', u'7je659yxty', u'7h6bwp1u0g', u'7jskc3cr4h', u'7p3dh076cz', u'7p4wb7uygg', u'6ujjbh17rv']", "lat": -10.000002086162567, "url": "http://www.cbc.ca/news/world/world-cup-sexy-brazil-sees-explosion-in-teen-prostitutes-1.2678812", "subline": "For many of Brazil's poorest, their piece of prosperity is turning a trick", "headline": "World Cup: 'Sexy Brazil' sees explosion in teen prostitutes", "long": -54.99999940395355, "source": "cbc"}], "tjsq94n36e": [{"locationName": "Iran IR", "date": "Last Updated: Jul 21, 2014 7:37 AM ET", "secondaryLocations": "[u'tjtwn13mt8']", "lat": 32.091297805309296, "url": "http://www.cbc.ca/news/world/iran-has-diluted-its-enriched-uranium-un-1.2712956", "subline": "Iranian government had enough enriched uranium for 1 warhead: international monitors", "headline": "Iran has diluted its enriched uranium: UN", "long": 51.02920353412628, "source": "cbc"}], "wydm9x2j07": [{"locationName": " KR", "date": "Last Updated: Jun 11, 2014 4:12 AM ET", "secondaryLocations": "[u'wydmckwg0u', u'wy7jzqr87q', u'wydd81e7sc', u'wz479cy8fk']", "lat": 37.569999396800995, "url": "http://www.cbc.ca/news/world/south-korea-ferry-disaster-police-raid-church-in-search-of-fugitive-owner-1.2671731", "subline": "Yoo Byung-un is believed to be trying to broker a deal to be smuggled out of reach of authorities", "headline": "South Korea ferry disaster: Police raid church in search of fugitive owner", "long": 126.97999656200409, "source": "cbc"}, {"locationName": " KR", "date": "Last Updated: Jun 30, 2014 7:28 AM ET", "secondaryLocations": "[u'wy7jzqr87q', u'wz479cy8fk']", "lat": 37.569999396800995, "url": "http://www.cbc.ca/news/world/south-korea-ferry-disaster-owner-blamed-for-5-earlier-crashes-1.2691670", "subline": "Speculation that monopoly discouraged regulators from taking action over safety lapses", "headline": "South Korea ferry disaster: owner blamed for 5 earlier crashes", "long": 126.97999656200409, "source": "cbc"}, {"locationName": " KR", "date": "Last Updated: Jul 21, 2014 10:55 PM ET", "secondaryLocations": "[u'wy4wv4552w', u'wydmckwg0u', u'wz479cy8fk']", "lat": 37.569999396800995, "url": "http://www.cbc.ca/news/world/south-korea-ferry-disaster-fugutive-billionaire-ferry-owner-found-dead-1.2714002", "subline": "Yoo Byung-un was subject to the largest manhunt in country's history ", "headline": "South Korea ferry disaster: Fugutive billionaire ferry owner found dead", "long": 126.97999656200409, "source": "cbc"}], "w7mgergfnb": [{"locationName": "Hainan CN", "date": "Last Updated: Jul 17, 2014 4:32 PM ET", "secondaryLocations": "[u'wtq7fw8rbw', u'wdqcbntdqp', u'wdwh4p0gws', u'wdtfqgxer9', u'wtqj870j4d', u'wdw5148e9s', u'wdtfndy01v', u'wc33eqzudu']", "lat": 18.939402401447296, "url": "http://www.cbc.ca/news/world/typhoon-rammasun-kills-38-in-philippines-1.2709497", "subline": "Now Southern China braces for typhoon after heavy rains and landslides have killed at least 45", "headline": "Typhoon Rammasun kills 38 in Philippines", "long": 109.48420464992523, "source": "cbc"}], "dpz3qxvg1n": [{"locationName": "Maple CA", "date": "Last Updated: Jul 21, 2014 7:52 PM ET", "secondaryLocations": "[u'f8370myfmq', u'cfsmq4xj7d']", "lat": 43.85659843683243, "url": "http://www.cbc.ca/sports/commonwealthgames/news/commonwealth-games-maple-leaf-raised-at-athletes-village-1.2713821", "subline": "100 Canadian athletes welcomed at ceremony.", "headline": "Commonwealth Games: Maple Leaf raised at athletes village ", "long": -79.51109826564789, "source": "cbc"}], "wtw2de8tdp": [{"locationName": "Shanghai CN", "date": "Last Updated: Jul 21, 2014 2:12 PM ET", "secondaryLocations": "[u'wtsryt1hv4', u'wwcg0g15pd', u'ww6q0j6r9n', u'wkz4gtcgbu', u'wmukzpgtkf', u'w7wb9w3mh5']", "lat": 31.045601069927216, "url": "http://www.cbc.ca/news/business/mcdonald-s-kfc-apologize-in-chinese-expired-meat-scandal-1.2713508", "subline": "TV report reveals Chinese factory updated labels on expired products", "headline": "McDonald's, KFC apologize in Chinese expired meat scandal", "long": 121.39970362186432, "source": "cbc"}], "sg6rwfunkf": [{"locationName": "Port Sudan SD", "date": "Last Updated: Apr 22, 2014 5:09 PM ET", "secondaryLocations": "[u'sdtm6dtm6d', u's9thwbggy7']", "lat": 19.615801870822906, "url": "http://www.cbc.ca/news/world/south-sudan-conflict-children-elderly-killed-in-latest-slaughter-1.2617625", "subline": "U.N. official says killings a 'game-changer' for conflict which began in mid-December", "headline": "South Sudan conflict: Children, elderly killed in latest slaughter", "long": 37.21639573574066, "source": "cbc"}], "u1k4dv748t": [{"locationName": " NL", "date": "Last Updated: Jul 19, 2014 1:36 PM MT", "secondaryLocations": "[u'u173zfh0z7', u'c3x29tku3p', u'u1k2dvbezj']", "lat": 52.50000089406967, "url": "http://www.cbc.ca/news/canada/edmonton/edmonton-s-dutch-ukrainians-mourn-victims-of-flight-mh17-1.2712267", "subline": "A small group held a candlelight service at the Dutch Canadian Centre in Edmonton", "headline": "Edmonton's Dutch, Ukrainians mourn victims of Flight MH17", "long": 5.749996304512024, "source": "cbc"}, {"locationName": " NL", "date": "Last Updated: Jul 20, 2014 8:56 AM ET", "secondaryLocations": "[u'u173zfh0z7', u'u173s0fve4']", "lat": 52.50000089406967, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-disaster-has-low-key-dutch-seething-1.2712378", "subline": "Reports the crash site has been compromised and bodies left to rot roil Netherlands", "headline": "Malaysia Airlines Flight MH17 disaster has low-key Dutch seething", "long": 5.749996304512024, "source": "cbc"}], "9yp2p3hxsg": [{"locationName": "Cleveland US", "date": "Last Updated: Jul 04, 2014 5:35 AM ET", "secondaryLocations": "[u'9yg00twy01', u'dphhbzwpf3', u'dn08zzwqf9', u'drttxc8nc0', u'9y1h8uqy03', u'9yugbhvcj1', u'9z76335zf7', u'bdvep6pp05', u'dqcjphfwsw', u'9vx5dktzu4', u'dqb1s785pw', u'djczytb9t2', u'9vrq33d06w', u'dpnwk711pf', u'dnr9pv4085', u'9vqc2m22qx', u'dppc7dt7js', u'9ytd31717d', u'dntuhx68k1', u'dpm0fmvcuj', u'dpn5f8vf76']", "lat": 33.75679939985275, "url": "http://www.cbc.ca/news/world/from-washington-redskins-to-queer-culture-the-uneasy-evolution-of-the-slur-1.2695771", "subline": "The current practice of 'reclaiming' slurs is pushing at least some once-tainted words into the mainstream", "headline": "From 'Washington Redskins' to 'queer culture,' the uneasy evolution of the slur", "long": -90.72969496250153, "source": "cbc"}], "w6g7h0dyg0": [{"locationName": " VN", "date": "Last Updated: Jul 21, 2014 3:10 PM ET", "secondaryLocations": "[u'w7f94dt8nn', u'wj4m2b6ht2', u'wkz4gtcgbu', u'w7mgergfnb', u'w7f9qyehz8']", "lat": 16.0000017285347, "url": "http://www.cbc.ca/news/world/typhoon-leaves-11-dead-in-vietnam-after-killing-26-in-china-1.2713295", "subline": "", "headline": "Typhoon leaves 11 dead in Vietnam after killing 26 in China", "long": 106.00000441074371, "source": "cbc"}], "dqcjphfwsw": [{"locationName": "Washington US", "date": "Last Updated: Jul 16, 2014 8:02 AM ET", "secondaryLocations": "[u'9yg00twy01', u'dng5qdje7e', u'9zyf8phdj2', u'dnhzd90r20', u'9vk3tnj47q', u'dnjjegt6c0', u'dnf8xp75pg', u'dr7uu5d877', u'dnf5bqbkw7', u'9v7shjyxf9', u'dryev5cefj', u'djysqzw86x', u'dr0yxg9h9k', u'drvve3yszk', u'dp6b0rkx5k', u'djczytb9t2', u'dnsgbprc1s', u'dnf3zz88nq', u'bdvep6pp05', u'9vte83brk9', u'dppc7dt7js', u'dr17x40sw9', u'drttxc8nc0', u'dppxzheq72', u'9zvnybqnns', u'9v5usk225x', u'dqcjpc2tww', u'9vhrq0q8xu', u'dpm0fmvcuj', u'dpn5f8vf76']", "lat": 38.874899446964264, "url": "http://www.cbc.ca/news/world/mayan-translator-hears-sad-stories-from-migrants-at-u-s-border-1.2707816", "subline": "Sheba Velasco translates Ixil, a Mayan language in Guatemala, to English in U.S. courts", "headline": "Mayan translator hears 'sad stories' from migrants at U.S. border", "long": -77.03250110149384, "source": "cbc"}], "9yg00twy01": [{"locationName": " US", "date": "Last Updated: Jul 10, 2014 5:29 AM ET", "secondaryLocations": "[u'9qhpuxh0vf', u'c23j0s4gzj', u'9qc40e8wyb', u'9x3pcp1vb1', u'9tcfvx778h', u'dnf8xp75pg', u'djczytb9t2', u'dr0yxg9h9k', u'drszx4fzpq', u'djysqzw86x', u'9q5fdzzcn2', u'dp8wc5vf5n', u'9z77nv6tth', u'c2s3bk3huh', u'dqcjphfwsw', u'9v7shjyxf9', u'9y4xttkz94', u'9qfpgjhu8c', u'dq03d3gzhf', u'9ym5w70zc3', u'dpp5vgx7ky', u'9qdgy3jvtv', u'9y6dqjtg04', u'9vw2mszz65', u'9qh8ncy3ev', u'dhvy6014qv', u'9vweqstk87', u'9yxxk8bmdu', u'9vzz7np8mq', u'dp1pk7cjpj', u'9zewx13nxz', u'c26gbd7x51', u'dj2n0fg4tj', u'9y2sqpyvrc', u'9y7bpef2uk', u'dn5fb7d150', u'9wnj8q9jbc', u'9tbdc926b6', u'9q5dbgruvn', u'9q8zdftzw5', u'9vhrq0q8xu', u'9qhey71t3r', u'9qj4qc6rep', u'9qcy7xynhf', u'c23jxyj8x3', u'9t9j0v2pyu', u'dpm0fmvcuj', u'dpn5f8vf76', u'c25cy4z3t7', u'c2342tfjxd', u'9v0r0134nh', u'9q6253u58w', u'9muf4gedty', u'9qnw643dfy', u'9qh8gzqukc', u'9q94zdcdqc', u'9muv4n2nrx', u'9q9ntb9ygg', u'dr78741y9b', u'dqck2r0sb6', u'dr1es8cb38', u'cbkuxsc74m', u'9w9u0qcdm1', u'9qf144vzzm', u'9q5f3ex0mk', u'9whpt4gn10', u'9vg13ky754', u'9qht4uqpq8', u'9r4c62tuvd', u'9wd1p64kf7', u'dqc95p00ne', u'9w1xp840f0', u'dng0ktmbyy', u'dqcnev4tv5', u'dr7ugt9n3b', u'drdkzj5cn2', u'dpr1xb98ub', u'dj6ub2tp1r', u'dndh1pvtb4', u'f052kntuzn', u'9mupu09ncp', u'9w0jhww18j', u'9tbd6g58vn', u'dj3w8t5seq', u'9x0etwb6g4', u'f044ns7qfn', u'9vu917jqgj', u'dq0jbc3u0b', u'dntzvh5sjq', u'9xzjqvhppt', u'dnvg3b57f5']", "lat": 38.00000041723251, "url": "http://www.cbc.ca/news/world/child-migrants-flooding-the-u-s-border-a-guide-to-the-issues-1.2701489", "subline": "More than 52,000 unaccompanied minors from Central America have crossed the border", "headline": "Child migrants flooding the U.S. border: a guide to the issues", "long": -97.0000022649765, "source": "cbc"}, {"locationName": " US", "date": "Last Updated: Jan 16, 2013 4:26 PM ET", "secondaryLocations": "[u'9vqc2m22qx', u'dntuhx68k1', u'dpxvfpt0kg', u'dp6qmfrfp4', u'9zuc6ee3hk', u'dp97vr3679', u'dqcjphfwsw', u'dr4z54kg7d', u'dj2n0fg4tj', u'c23uwnckqk', u'9ve1mj3n10', u'dr5xmt2byg', u'c24kvddpwg', u'9zewx13nxz', u'c26gbd7x51', u'dpm0fmvcuj', u'dpn5f8vf76', u'9vgyq5tvhw', u'9yyjgpxp59', u'dr78741y9b', u'dqck2r0sb6', u'dr1es8cb38', u'dp3w84h02x', u'dng0ktmbyy', u'dqcnev4tv5', u'dr7ugt9n3b', u'drdkzj5cn2', u'dpr1xb98ub', u'dj6ub2tp1r', u'f044ns7qfn', u'drkswpwsu5', u'dr71r3g79c', u'dp2mzz4uqs', u'9w37vb3sxu', u'dr4z4977ye', u'dqc1ez7wju', u'9v40xx0rgv', u'drex48m7vf', u'9wvn0ev027', u'dr5xe3pr30', u'dnjseqyk4g', u'dr4v0jfb51', u'dqcjpc2tww']", "lat": 38.00000041723251, "url": "http://www.cbc.ca/news/world/what-are-presidential-executive-orders-1.1360538", "subline": "", "headline": "What are presidential executive orders?", "long": -97.0000022649765, "source": "cbc"}, {"locationName": " US", "date": "Last Updated: Jan 29, 2014 6:09 AM ET", "secondaryLocations": "[u'9wnj8q9jbc', u'djczytb9t2', u'9vqc2m22qx', u'dr5ptbnywu', u'9z4yh3tmpf', u'9yre6gbskm', u'dp5qvx58hh', u'dntmycrk85', u'djysqzw86x', u'dppc7dt7js', u'9vweqstk87', u'9zh9kydvwh', u'dq334frz41', u'9vhrq0q8xu', u'9z1kjrm0ug', u'dnvg3b57f5', u'9x0tb33d28', u'9mu9z7w2d5', u'dr4dc1mwn2', u'f038kc82by', u'9v5usk225x', u'dp4wg1k30p']", "lat": 38.00000041723251, "url": "http://www.cbc.ca/news/world/barack-obama-urges-year-of-action-in-state-of-union-speech-1.2514710", "subline": "U.S. president touts health-care reform, presses for change on immigration ", "headline": "Barack Obama urges 'year of action' in state of union speech", "long": -97.0000022649765, "source": "cbc"}, {"locationName": " US", "date": "Last Updated: Jul 21, 2014 7:33 PM ET", "secondaryLocations": "[u'9wnj8q9jbc', u'dp26ykmr18', u'9vqc2m22qx', u'9xtjuwpu14', u'dr189wxket', u'dn5fb7d150', u'9ytd31717d', u'dp6bbw4uyp', u'9vte83brk9', u'9w21jr4hbb', u'dnvf77s320', u'djczytb9t2', u'9z1kjrm0ug', u'dp941pwrz3', u'9x0tb33d28', u'dqc5nc12xj', u'dnvg3b57f5', u'9rxehf719x', u'dq0jbc3u0b', u'dntzvh5sjq', u'9xzjqvhppt', u'9qc160170c', u'dp4wg1k30p', u'dr199ec5pf', u'dpsdem1ymc', u'9yghvspw90', u'dqbqnm7r4s', u'djm4q4776s', u'dnkv0xfpux', u'dr33dtts3w', u'dnn4nxbyjq', u'c24pg94cz2', u'dnwnwktge2', u'c2j7unksj2', u'dnjseqyk4g', u'9x3uk4g15b']", "lat": 38.00000041723251, "url": "http://www.cbc.ca/news/world/obama-orders-employment-protection-for-federal-lgbt-workers-1.2713870", "subline": "U.S. president originally reluctant to sign order in hopes Congress would take more sweeping action", "headline": "Obama orders employment protection for federal LGBT workers", "long": -97.0000022649765, "source": "cbc"}], "dqcx88senm": [{"locationName": "Saint Johns US", "date": "Last Updated: Jul 21, 2014 3:47 PM ET", "secondaryLocations": "[u'djz1c7g5he', u'9zvx6rzxcn', u'9vqc2m22qx', u'9yg00twy01', u'9ym5w70zc3', u'dqcx88senm', u'sr95sj8fj9', u'dp39w537ts', u'gcpv5v6e0z']", "lat": 39.29040044546127, "url": "http://www.cbc.ca/news/health/johns-hopkins-to-pay-out-190m-to-settle-lawsuit-over-secret-video-recordings-1.2713649", "subline": "Gynecologist used pen-like camera to film women's sex organs during pelvic exams", "headline": "Johns Hopkins to pay out $190M to settle lawsuit over secret video recordings", "long": -76.61219894886017, "source": "cbc"}], "ubdc58eefm": [{"locationName": "Donetsk UA", "date": "Last Updated: Jul 21, 2014 3:54 PM ET", "secondaryLocations": "[u'w942n980qg', u'u8wyb0jtwn', u'ube3q31qkc', u'w82n0p0581', u'w28k317389', u'w2bxmwgnjv', u'w28v1kt5kg', u'w0zkn4jdec']", "lat": 47.99170106649399, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-train-with-bodies-en-route-to-kharkiv-1.2712885", "subline": "UN Security Council approves resolution calling for safe, unimpeded access to crash site", "headline": "Malaysia Airlines Flight MH17: Train with bodies en route to Kharkiv", "long": 37.77590453624725, "source": "cbc"}], "dpsch0u6fh": [{"locationName": "Detroit US", "date": "Last Updated: Jul 21, 2014 11:03 AM ET", "secondaryLocations": "[u'drywwst32r']", "lat": 42.36789733171463, "url": "http://www.cbc.ca/news/canada/windsor/detroit-red-wings-reveal-650m-us-plan-for-new-downtown-arena-1.2713188", "subline": "Project expected to break ground this fall", "headline": "Detroit Red Wings reveal $650M US plan for new downtown arena", "long": -83.13860356807709, "source": "cbc"}, {"locationName": "Detroit US", "date": "Last Updated: Jul 21, 2014 2:41 PM ET", "secondaryLocations": "[u'drywwst32r']", "lat": 42.36789733171463, "url": "http://www.cbc.ca/news/canada/windsor/detroit-water-shutoffs-suspended-for-next-15-days-1.2713452", "subline": "Water department stopped service to about 7,200 homes, businesses in June", "headline": "Detroit water shutoffs suspended for next 15 days", "long": -83.13860356807709, "source": "cbc"}], "y4xj7d9v2f": [{"locationName": " RU", "date": "Last Updated: Jul 20, 2014 12:24 AM ET", "secondaryLocations": "[u'u8wyb0jtwn', u'ubs6vnch5n', u'ubdc58eefm', u'u8bf6w984n', u'udwn62gs6e', u'ucftpvqu55', u'u94e8uc40v', u'sr95sj8fj9']", "lat": 59.99999910593033, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-fury-over-evidence-tampering-at-crash-site-1.2712440", "subline": "Ukraine and Russian separatists accuse each other of shooting down the Boeing 777", "headline": "Malaysia Airlines Flight MH17: 'Fury' over evidence tampering at crash site", "long": 99.99999940395355, "source": "cbc"}, {"locationName": " RU", "date": "Last Updated: Jul 21, 2014 2:47 PM ET", "secondaryLocations": "[u'ubs6vnch5n']", "lat": 59.99999910593033, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-canada-to-strengthen-sanctions-on-russia-1.2713132", "subline": "U.S. presents 'powerful' evidence that Russia supplied weaponry used to shoot down jet", "headline": "Malaysia Airlines Flight MH17: Canada to strengthen sanctions on Russia", "long": 99.99999940395355, "source": "cbc"}, {"locationName": " RU", "date": "Last Updated: Jul 21, 2014 8:57 AM ET", "secondaryLocations": "[u'ubq7qvy99g', u'ucftpvqu55', u'ubs6vnch5n', u'uc39wwgxs4']", "lat": 59.99999910593033, "url": "http://www.cbc.ca/news/world/russia-s-blame-game-over-malaysian-airlines-mh17-1.2712764", "subline": "Like Napoleon, Richard Nixon, countless others, there is a limit to plausible deniability", "headline": "Russia's blame game over Malaysian Airlines MH17", "long": 99.99999940395355, "source": "cbc"}, {"locationName": " RU", "date": "Last Updated: Jul 20, 2014 11:16 PM ET", "secondaryLocations": "[u'ucftpvqu55', u'ubs6vnch5n', u'z4cfzdwuu8', u'uckyxtcr6r', u'w82n0p0581', u'u8wyb0jtwn', u'ube3q31qkc', u'ubdc58eefm']", "lat": 59.99999910593033, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-rebels-pile-bodies-in-boxcars-mother-makes-plea-to-putin-1.2712459", "subline": "More than three days after the jetliner crashed, international investigators still have limited access", "headline": "Malaysia Airlines Flight MH17: Rebels pile bodies in boxcars,  mother makes plea to Putin", "long": 99.99999940395355, "source": "cbc"}], "v88356hh6b": [{"locationName": " KZ", "date": "Last Updated: Jul 21, 2014 11:48 PM ET", "secondaryLocations": "[u'y4xj7d9v2f', u'drt2ytt03c', u'dhqke53wzu', u'dr842wugsf', u'9ycf5rb4rv', u'drmt007s6z', u'txm34xv669', u'dnrv182j14', u'drt3h397bn']", "lat": 47.999999821186066, "url": "http://www.cbc.ca/news/world/boston-marathon-bombing-suspect-s-friend-convicted-of-impeding-probe-1.2714018", "subline": "Azamat Tazhayakov, 20, faces up to 25 years in jail", "headline": "Boston Marathon bombing suspect's friend convicted of impeding probe", "long": 68.00000131130219, "source": "cbc"}], "u8wyb0jtwn": [{"locationName": " UA", "date": "Last Updated: Jul 21, 2014 10:02 PM ET", "secondaryLocations": "[u'ubdc58eefm', u'w82n0p0581', u'w942n980qg']", "lat": 49.000002443790436, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-black-boxes-handed-to-aviation-experts-as-un-urges-probe-1.2712885", "subline": "Refrigerated train moves victims' bodies to eastern city of Kharkiv", "headline": "Malaysia Airlines Flight MH17: Black boxes handed to aviation experts as UN urges probe", "long": 32.0000034570694, "source": "cbc"}, {"locationName": " UA", "date": "Last Updated: Jul 18, 2014 11:31 AM ET", "secondaryLocations": "[u'dntuhx68k1']", "lat": 49.000002443790436, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-don-t-turn-downing-of-jet-into-a-cold-war-club-1.2710574", "subline": "This is no longer just about a quarrel in Ukraine", "headline": "Malaysia Airlines Flight MH17: Don't turn downing of jet into a Cold War club", "long": 32.0000034570694, "source": "cbc"}, {"locationName": " UA", "date": "Last Updated: Jul 19, 2014 6:16 PM ET", "secondaryLocations": "[]", "lat": 49.000002443790436, "url": "http://www.cbc.ca/news/world/mh17-plane-crash-in-ukraine-latest-updates-1.2709963", "subline": "Nearly 300 passengers, crew reported killed", "headline": "MH17 plane crash in Ukraine: Latest updates ", "long": 32.0000034570694, "source": "cbc"}], "r28qjhgw80": [{"locationName": "George Town AU", "date": "Last Updated: Jul 21, 2014 1:53 PM ET", "secondaryLocations": "[u'r6k4x0b3pb', u'r718t009hz', u'r28sk0b1nz', u'dxczrf5gv9', u'f818j5513c', u'fd3huz9jpv', u'dpwyjc1bxw', u'f1xf3bjc9q', u'qgnw6kz9se', u'c38dwrhp89', u'f8w7sc187j', u'9zewx13nxz']", "lat": -41.105601489543915, "url": "http://www.cbc.ca/news/world/prince-george-turns-1-republican-slayer-pr-gold-for-royal-family-1.2709776", "subline": "Third in line to the throne has become media magnet and trendsetter ", "headline": "Prince George turns 1: 'Republican slayer' PR gold for Royal Family", "long": 146.82610094547272, "source": "cbc"}], "w82n0p0581": [{"locationName": " MY", "date": "Last Updated: Jul 20, 2014 3:41 PM ET", "secondaryLocations": "[u'y4xj7d9v2f', u'u8wyb0jtwn', u'v1cjkjjnse', u'v653nw3v8z', u'ucftpvqu55', u'ubx0bwwr64', u'vcfcp5zpup', u'ube94qchk1', u'ube4fv3pfv', u'u8dq0d45j4', u'u8revqk1mh']", "lat": 2.4999985098838806, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-missile-s-lack-of-radar-may-have-led-to-tragic-mistake-1.2712652", "subline": "If SA-11 was used, as U.S. suspects, it may not have been able to detect what it was aiming at", "headline": "Malaysia Airlines Flight MH17: Missile's lack of radar may have led to 'tragic mistake'", "long": 112.50000536441803, "source": "cbc"}, {"locationName": " MY", "date": "Last Updated: Jul 19, 2014 7:46 PM ET", "secondaryLocations": "[]", "lat": 2.4999985098838806, "url": "http://www.cbc.ca/news/world/malaysia-airlines-flight-mh17-faq-surface-to-air-missiles-1.2711697", "subline": "MH17 reportedly shot down by a SAM", "headline": "Malaysia Airlines Flight MH17 FAQ: Surface-to-air missiles", "long": 112.50000536441803, "source": "cbc"}], "sv8eny2hv9": [{"locationName": " IL", "date": "Last Updated: Jul 08, 2014 5:41 PM ET", "secondaryLocations": "[u'sv8sxebmjs', u'sv8ss97shv', u'svckdxfrbv']", "lat": 31.499999463558197, "url": "http://www.cbc.ca/news/technology/how-israel-s-iron-dome-missile-defence-system-works-1.1219839", "subline": "Iron Dome intercepts rockets aimed at Israeli cities", "headline": "How Israel's Iron Dome missile defence system works", "long": 34.74999725818634, "source": "cbc"}, {"locationName": " IL", "date": "Last Updated: Jul 20, 2014 7:55 PM ET", "secondaryLocations": "[u'sv9hc9meym', u'sv8sxebmjs', u'sv8uyyjfcc', u'svc52rgpe2', u'sv8v4w1edn']", "lat": 31.499999463558197, "url": "http://www.cbc.ca/news/world/tariq-abu-khdeir-talks-about-police-beating-in-israel-1.2712803", "subline": "Palestinian-American teen says in the first moments of being picked up, he was slammed down head first", "headline": "Tariq Abu Khdeir talks about police beating in Israel", "long": 34.74999725818634, "source": "cbc"}], "cfsmq4xj7d": [{"locationName": " CA", "date": "Last Updated: Jul 21, 2014 6:38 PM ET", "secondaryLocations": "[u'dpz82v68by', u'c8yjh2qtdk', u'dxcvqpb21h']", "lat": 59.99999910593033, "url": "http://www.cbc.ca/news/canada/virtuous-pedophiles-group-gives-support-therapy-cannot-1.2710160", "subline": "Stigma around pedophilia affecting therapy, search for cause of condition", "headline": "Virtuous Pedophiles group gives support therapy cannot", "long": -94.99999701976776, "source": "cbc"}]}
            
            //$.ajax({
            //    url: "data/data.txt",
            //    async: false,
            //    dataType: 'json',
            //    success: function(data) {
            //        locationInfo = data;
            //    }
            //});
            
            var markerList = [];
            var i = 0;
            
            console.log(locationInfo);
            for(var key in locationInfo){
                latitude = locationInfo[key][0].lat;
                longitude = locationInfo[key][0].long;
                markerList[i] = new L.marker([latitude, longitude],{win_url: key});
                var news = "";
                for(var key2 in locationInfo[key]){
                    var newsStory = "<a href="+locationInfo[key][key2].url+">"+locationInfo[key][key2].headline+"</a><br>"
                    +"<br>";
                    
                    news = news.concat(newsStory);
                }
                markerList[i].addTo(map);
                markerList[i].bindPopup(news);
                markerList[i].on('click', prepender);
                i = i+1;
            }

            for(var key in locationInfo){
                $("#cards").append("<div id='"+key+"-card' class='card'></div>");
                for(var each in locationInfo[key]){
                    $("#"+key+"-card").append("<div class='story'><a href="+locationInfo[key][each].url+">"+locationInfo[key][each].headline+"</a><br>"
                                               +"<p><b>"+locationInfo[key][each].date+"</b></p>"
                                               +"<p class='subline'>"+locationInfo[key][each].subline+"</p>"
                                               +"<p class='source'>"+locationInfo[key][each].source+"</p>"
                                               +"</div>");
                }
            }
            
        });
    </script>
</html>